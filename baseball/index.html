---
layout: example
title: Baseball
---

<style>
.axis .tick line, .axis path.domain {
  stroke-opacity: 0 !important;
} 
</style>
<script>
function collectData(layer) {
  return d3.selectAll('.geom.' + layer).data();
}
var div = d3.select('#chart01'),
    chart, data;

var layers = ggd3.layer()
                .geom(ggd3.geoms.bar()
                        .offset('expand'))
                .position('stack')
                .stat({x:'mean', alpha: 'max'});

var facet = ggd3.facet().titleSize([0,0]);

var chart = ggd3.plot()
              .facet(facet)
              .width(300)
              .height(1100)
              .color('white')
              .rangeBand(0)
              .rangePadding(0)
              .subRangePadding(0.2)
              .layers(layers)
              .margins({right: 50, left: 20})
              .xScale({axis: {ticks:4, position: 'top',
                              orient:'top'}})
              .yScale({axis:{position:"right",
                            orient: "right"}})
              .aes({y: "team", x:"batting",
                    fill: "decade",
                    alpha: "hr"})
              .dtypes({"year": ['date', 'many', "%Y"],
                  "decade": ['string'],
                  "stint": ['string'],
                  "batting": ["number", "many"]})

d3.csv("{{ site.baseurl }}/assets/data/baseball.csv", function(error, d) {
  data = d;
  chart.data(data).draw(div);
})

function redraw() {
  chart.draw(div);
}

</script>
