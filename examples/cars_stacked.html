<html>
<head>
<link rel='stylesheet' href='../css/ggd3style.css'>
<link rel='stylesheet' href='../node_modules/bootstrap/dist/css/bootstrap.css'>
<script type='text/javascript' src='../ggd3.standalone.js'></script></head>
</head>
<body>
<!-- <select id="xVar" class='btn btn-primary'>
</select>    
<select id="yVar" class='btn btn-primary'>
</select>    
 -->
<!-- <select id="facet-scales" class='btn btn-primary'>
  <option value="fixed" id="fixed" selected>fixed</option>
  <option value="free" id="free" >free</option>
  <option value="free_x" id="free_x" >free x</option>
  <option value="free_y" id="free_y" >free y</option>
</select>    
 --><!-- <select id="xAxisPos" class='btn btn-primary'>
  <option value="bottom" selected>x axis bottom</option>
  <option value="top">x axis top</option>
</select>    
<select id="yAxisPos" class='btn btn-primary'>
  <option value="left" selected>y axis left</option>
  <option value="right">y axis right</option>
</select>    
 -->
</div>
<div id='chart01' class='chart-frame'></div>
<script>
function collectData(layer) {
  return d3.selectAll('.geom.' + layer).data();
}
d3.csv("../data/mtcars.csv", function(error, cars) {
    carLayer = ggd3.layer()
                    .position('stack')
                    .stat({y: 'mean'})
                    .geom(ggd3.geoms.bar().offset('silhouette'));
    jitterLayer = ggd3.layer().position('jitter').geom('point');
    carChart = ggd3.plot()
                    .layers([carLayer, jitterLayer])
                    .width(250)
                    .facet({x:'am', nrows: 1})
                    .dtypes({"gear": ["string", 'few'], 
                            "cyl": ["string", 'few'],
                            "mpg": ['number', 'many'],
                            "hp": ['number', 'many'],
                        })
                    .data(cars)
                    .aes({x: "cyl", y: "mpg", fill: "gear", 
                         alpha: "hp"});
carChart.draw(d3.select('#chart01'));
});
    
</script>
</body>
</html>