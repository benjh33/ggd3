---
layout: example
title: Bar with errors
---
<style>
.ygrid path, .xgrid path {
  stroke-opacity: 0.2;
}
.axis .tick line, .axis path.domain {
  stroke-opacity: 0 !important;
} 
</style>

<!--
<select id="facet-scales" class='btn btn-primary'>
  <option value="fixed" id="fixed" >fixed</option>
  <option value="free" id="free" selected>free</option>
  <option value="free_x" id="free_x" >free x</option>
  <option value="free_y" id="free_y" >free y</option>
</select>    
-->
<script>
var div = d3.select('#chart01'),
    chart, data,
    lr = ggd3.layer().geom('linerange')
          .aes({xmin: function(d) {
                        return d.coef - 2*d.se;
                      },
                xmax: function(d) {
                  return d.coef + 2*d.se;
                }});

var layers = [ggd3.layer().geom(ggd3.geoms.bar().color('none'))
                  .stat({x: 'identity'}), lr];

var facet = ggd3.facet({x:'coefficient', ncols: 2, type:'grid'});

var chart = ggd3.plot()
              .facet(facet)
              .width(300)
              .xScale({axis: {ticks: 5}, label: ""})
              .rangePadding(0) // not working
              .height(1000)
              .xGrid(false)
              .margins({top:0, bottom:30, left:130, right:10})
              .layers(layers)
              .aes({y:'county', x: "coef"});  
var sorted;

d3.csv("{{ site.baseurl }}/assets/data/MN_ranefs.csv", function(error, d) {
  data = d;

  sorted = _.filter(d, 
                  function(d) { return d.coefficient === "intercept";})
  sorted = _.map(sorted.sort(function(a,b) {
    return b.coef - a.coef;
  }), "county");
  sorted.reverse();

  chart.data(data)
       .yScale({axis:{ticks:4}, 
                scale: {domain: sorted}, label: ""})
       .draw(div);
})


</script>
